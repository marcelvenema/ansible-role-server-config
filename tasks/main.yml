--- 

# Show message
- name: Show Information message
  debug:
    msg: "Starting role {{ role_name }}... action: {{ action }}."

# If action variable is not defined, gather status of the service and set action variable  
- name: Determine action variable status
  ansible.builtin.include_tasks: get_status.yml
  when: action is not defined

- name: Verify variable input
  ansible.builtin.assert:
    that:
      - action is defined and action in actions
    fail_msg: "Please provide 'action' {{ actions }}"
    quiet: true

# -------------------------------------------------------

- name: Configure server
  ansible.builtin.include_tasks: configure_server.yml
  when: action == "configure_server"

- name: Configure vault
  ansible.builtin.include_tasks: configure_vault.yml
  when: action == "configure_vault"
